@use '../base/globals' as *;

.animated-two-column-block {
   @include flex-between;
   flex-direction: column;
  /* default slide-in direction (from RIGHT) */
  --slide-x: 4rem;

  @include respond-up(large) {
    flex-direction: row;
    align-items: stretch;
  }

  &.reverse-on-mobile--1 {
    @include respond-down(large){
      flex-direction: column-reverse;
    }
  }

  &__wrapper {
    background: unset;
  }

  &__image {   
    @include respond-up(large) { 
      position: relative;    
      overflow: hidden; 
      width: 50%; 
      min-height: 0; 
    }

    img {
      display: block;
      width: 100%;           
      height: 320px;
      object-fit: cover; 

      @include respond-up(large){
        position: absolute;    
        inset: 0;                 
        object-position: top;
        height: 100%;

        /* fade the RIGHT edge into white */
        --edge-fade: 28%;

        -webkit-mask-image: linear-gradient(
          to right,
          #000 0%,
          #000 calc(100% - var(--edge-fade)),
          rgba(0,0,0,0) 100%
        );
        mask-image: linear-gradient(
          to right,
          #000 0%,
          #000 calc(100% - var(--edge-fade)),
          rgba(0,0,0,0) 100%
        );
      }
    }
  }

  &__content {
    position: relative;
    z-index: 2;
    min-height: 0;
    padding-bottom: 40px;

    @include respond-up(large) { 
      width: 50%; 
    }
  }

  &__heading {
    margin: 24px 24px 32px 24px;
    font-size: clamp(40px, 55vw, 4vw); 
    color: $colorTwo;

    @include respond-up(large){
      margin: 24px 0 32px -112px;
    }
  }

  &__description {
    width: 80%;
    margin: auto auto 0;
    color: $white;
  }

  .primary-button { 
    margin-top: 40px; 
  }

  li { 
    margin-top: 16px; 
    list-style-type: disc; 
  }

  /* ===== Reversed layout: image on RIGHT, text on LEFT ===== */
  &.reverse--1 {
    /* flip layout on â‰¥ large */
    @include respond-up(large) { flex-direction: row-reverse; }

    /* flip slide direction (now from LEFT) */
    --slide-x: -4rem;

    .animated-two-column-block__heading {
      margin: 24px 24px 32px;
      text-align: right;

      @include respond-up(large){
        margin: 24px -112px 32px 0;
      }
    }

    .animated-two-column-block__description {
      margin: 0 32px 0 auto;
      text-align: right;
    }

    .primary-button { 
      margin-left: auto; 
    }

    /* fade the LEFT edge when the image sits on the right */
    .animated-two-column-block__image img {
      -webkit-mask-image: linear-gradient(
        to right,
        rgba(0,0,0,0) 0%,
        #000 var(--edge-fade),
        #000 100%
      );
      mask-image: linear-gradient(
        to right,
        rgba(0,0,0,0) 0%,
        #000 var(--edge-fade),
        #000 100%
      );
    }
  }
}

/* ===== Animation (JS toggles .is-in-view on the inner block) ===== */
.js .animated-two-column-block {
  &__heading,
  &__description {
    opacity: 0;
    transform: translateX(var(--slide-x, 4rem)); /* direction set per block */
    transition:
      transform 820ms cubic-bezier(.2,.7,.2,1),
      opacity 800ms ease;
    will-change: transform, opacity;
  }

  /* Stagger: heading first, then description */
  &.is-in-view {
    .animated-two-column-block__heading {
      opacity: 1;
      transform: translateX(0);
      transition-delay: 400ms;
    }
    .animated-two-column-block__description {
      opacity: 1;
      transform: translateX(0);
      transition-delay: 700ms;
    }
  }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .animated-two-column-block__heading,
  .animated-two-column-block__description {
    transition: none !important;
    opacity: 1 !important;
    transform: none !important;
  }
}
