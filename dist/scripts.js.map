{"version":3,"file":"scripts.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT;;AAEA,6CAA6C;AAC7C;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA,OAAO;;AAEP;AACA,KAAK;AACL,GAAG;AACH,CAAC;;;AAGD;AACA;AACA,mCAAmC;AACnC,kEAAkE;AAClE;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC,GAAG;;;AAGH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA,gEAAgE;AAChE;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,wBAAwB,EAAE,0BAA0B,EAAE,wBAAwB;AACtG;;AAEA;AACA;AACA;AACA;;AAEA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,OAAO,EAAE,0BAA0B,EAAE,OAAO;AACtE;AACA;AACA,QAAQ;AACR,4BAA4B,OAAO,EAAE,+BAA+B,EAAE,OAAO;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,OAAO;;AAEP;AACA,wBAAwB;AACxB;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8BAA8B,sCAAsC;AAC5E,QAAQ,8BAA8B,sCAAsC;AAC5E,QAAQ,8BAA8B;AACtC;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6CAA6C;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;AAKD,GAAG;AACH,CAAC","sources":["webpack://king-law/./app/js/scripts.js"],"sourcesContent":["(function ($) {\n  $(function () {\n// Sticky menu\n    $(window).on('scroll', function () {\n      if ($(window).scrollTop() >= 100) {\n        $('.site-header__wrapper').addClass('sticky');\n        $('nav div').addClass('visible-title');\n      } else {\n        $('.site-header__wrapper').removeClass('sticky');\n      }\n    });\n\n    // Stop scroll when menu is open\n    $('.menu-toggle').on('click', function () {\n      $('html').toggleClass('active');\n    });\n\n\n// Hero Block Animation\n(function ($) {\n  $(function () {\n    if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;\n\n    $('.hero-block__heading').each(function () {\n      const $h = $(this);\n      if ($h.data('pulsified')) return;\n      $h.data('pulsified', true);\n\n      let i = 0; // global index for stagger delays\n      const frag = document.createDocumentFragment();\n\n      function addWord(wordText, strong) {\n        const word = document.createElement('span');\n        word.className = 'word' + (strong ? ' pulse-strong' : '');\n        for (const ch of wordText) {\n          const c = document.createElement('span');\n          c.className = 'char';\n          c.style.setProperty('--i', i++);\n          c.textContent = ch;\n          word.appendChild(c);\n        }\n        frag.appendChild(word);\n      }\n\n      function processText(text, strong) {\n        // Split into words and whitespace, preserve spaces as real spaces\n        const parts = text.split(/(\\s+)/);\n        parts.forEach(part => {\n          if (!part) return;\n          if (/^\\s+$/.test(part)) {\n            frag.appendChild(document.createTextNode(part));\n          } else {\n            addWord(part, strong);\n          }\n        });\n      }\n\n      // Rebuild while preserving <br> etc.; <span> means \"pulse stronger\"\n      Array.from(this.childNodes).forEach(node => {\n        if (node.nodeType === 3) {\n          processText(node.nodeValue, false);\n        } else if (node.nodeType === 1 && node.tagName === 'SPAN') {\n          Array.from(node.childNodes).forEach(child => {\n            if (child.nodeType === 3) processText(child.nodeValue, true);\n            else frag.appendChild(child.cloneNode(true));\n          });\n        } else {\n          frag.appendChild(node.cloneNode(true));\n        }\n      });\n\n      this.replaceChildren(frag);\n    });\n  });\n})(jQuery);\n\n\n// Services Block\nfunction setActiveImage($images, idx) {\n  $images.removeClass('is-hover'); // clear preview\n  $images.removeClass('is-active').eq(idx).addClass('is-active'); // CSS handles cross-fade\n}\n\n// Ensure first image shows on load per block\n$('.services-block').each(function () {\n  const $images = $(this).find('.services-block__image');\n  setActiveImage($images, 0);\n});\n\n// Reset a block to default state, keep current active image\nfunction closeBlock($block) {\n  const $headings = $block.find('.services-block__heading');\n  const $descs    = $block.find('.services-block__description');\n\n  // show all headings again and reset width to base\n  $headings.show().removeClass('active').css('width', '');\n\n  // close any open description\n  $descs.stop(true, true).slideUp(150);\n\n  // clear block states\n  $block.removeClass('only-active is-hovering');\n}\n\n// Click to open or close, and hide or show other headings\n$(document).on('click', '.services-block__heading', function (e) {\n  e.preventDefault();\n\n  const $heading     = $(this);\n  const $block       = $heading.closest('.services-block');\n  const $desc        = $heading.next('.services-block__description');\n  const $images      = $block.find('.services-block__image');\n  const $allHeadings = $block.find('.services-block__heading');\n  const isOpen       = $heading.hasClass('active');\n\n  if (isOpen) {\n    // second click, close and restore headings\n    closeBlock($block);\n    return;\n  }\n\n  // first click on this heading, close others\n  $allHeadings.removeClass('active').css('width', '');\n  $block.find('.services-block__description').not($desc).stop(true, true).slideUp(0);\n\n  // kill hover state before swapping so the new active is not hidden\n  $block.removeClass('is-hovering');\n  $images.removeClass('is-hover');\n\n  // map image index to heading index and show it smoothly\n  const idx = $allHeadings.index($heading);\n  if (idx >= 0 && $images.length) setActiveImage($images, Math.min(idx, $images.length - 1));\n\n  // open this one, expand to 100%\n  $heading.addClass('active').css('width', '100%');\n  $desc.stop(true, true).slideDown(150);\n\n  // hide other headings while open\n  $allHeadings.not($heading).hide();\n  $block.addClass('only-active');\n});\n\n// Click outside the block to restore headings and close description\n$(document).on('mousedown', function (e) {\n  const $target = $(e.target);\n  $('.services-block.only-active').each(function () {\n    const $block = $(this);\n    if ($block.has($target).length === 0) {\n      closeBlock($block);\n    }\n  });\n});\n\n// Hover preview, ignore hover on the active heading\n$(document)\n  .on('mouseenter', '.services-block__heading', function () {\n    const $heading  = $(this);\n    const $block    = $heading.closest('.services-block');\n    const $headings = $block.find('.services-block__heading');\n    const $images   = $block.find('.services-block__image');\n\n    // no preview during only-active mode, or on the active heading itself\n    if ($heading.hasClass('active') || $block.hasClass('only-active')) return;\n\n    const idx = $headings.index($heading);\n    if (idx < 0) return;\n\n    $block.addClass('is-hovering');\n    $images.removeClass('is-hover').eq(idx).addClass('is-hover');\n  })\n  .on('mouseleave', '.services-block', function () {\n    const $block  = $(this);\n    const $images = $block.find('.services-block__image');\n\n    $block.removeClass('is-hovering');\n    $images.removeClass('is-hover'); // reveal whichever is .is-active\n  });\n\n\n// Sticky CTA Block\n    const $inner = $('.sticky-cta-block__inner');\n    const $wrapper = $('.sticky-cta-block__wrapper');\n    const $content = $('.landing-page__content');\n\n    if (window.innerWidth >= 768 && $inner.length && $wrapper.length && $content.length) {\n      $('.landing-page__content__wrapper').addClass('sticky-block-added');\n\n      const fixedTop = 64;\n      const fixedWidth = 480;\n\n      function updateStickyCTA() {\n        const scrollTop = $(window).scrollTop();\n        const wrapperTop = $wrapper.offset().top;\n        const wrapperLeft = $wrapper.offset().left;\n        const stickyHeight = $inner.outerHeight();\n        const contentBottom = $content.offset().top + $content.outerHeight();\n\n        if (scrollTop >= wrapperTop && scrollTop + stickyHeight < contentBottom) {\n          $inner.css({\n            position: 'fixed',\n            top: fixedTop + 'px',\n            left: wrapperLeft + 'px',\n            width: fixedWidth + 'px',\n            padding: '32px',\n            border: '1px solid',\n            borderRadius: '16px',\n          });\n        } else if (scrollTop + stickyHeight >= contentBottom) {\n          const absoluteTop = contentBottom - wrapperTop - stickyHeight;\n          $inner.css({\n            position: 'absolute',\n            top: absoluteTop + 'px',\n            left: '0',\n            width: '100%',\n            padding: '32px',\n            border: '1px solid',\n            borderRadius: '16px',\n          });\n        } else {\n          $inner.css({\n            position: 'static',\n            top: '',\n            left: '',\n            width: '100%',\n            padding: '32px',\n            border: '1px solid',\n            borderRadius: '16px',\n          });\n        }\n      }\n\n      $(window).on('scroll resize', updateStickyCTA);\n      updateStickyCTA();\n    }\n\n\n// Car animation\n    let carHasDrivenOff = false;\n    $(window).on('load', function () {\n      $('.sliding-image').addClass('slide-in');\n    });\n    $(window).on('scroll', function () {\n      const scrollTop = $(window).scrollTop();\n\n      if (scrollTop > 20 && !carHasDrivenOff) {\n        $('.sliding-image').removeClass('slide-in').addClass('slide-out');\n        carHasDrivenOff = true;\n      }\n\n      if (scrollTop <= 10 && carHasDrivenOff) {\n        $('.sliding-image').removeClass('slide-out').addClass('slide-in');\n        carHasDrivenOff = false;\n      }\n    });\n\n\n// Vertical Sliding Animation\n    const raf = window.requestAnimationFrame || function (cb) { return setTimeout(cb, 1000 / 60); };\n    const elementsToShow = document.querySelectorAll('.vertical-slide-yes');\n\n    function loop() {\n      Array.prototype.forEach.call(elementsToShow, function (element) {\n        if (isElementInViewport(element)) element.classList.add('is-visible');\n        else element.classList.remove('is-visible');\n      });\n      raf(loop);\n    }\n    loop();\n\n    function isElementInViewport(el) {\n      if (typeof jQuery === 'function' && el instanceof jQuery) el = el[0];\n      const rect = el.getBoundingClientRect();\n      const vh = window.innerHeight || document.documentElement.clientHeight;\n      const revealPoint = vh * 0.1;\n      return rect.top <= vh - revealPoint && rect.bottom >= revealPoint;\n    }\n\n\n// Credentials Block Animation\n(function () {\n  const DEFAULT_DURATION = 1200;\n  const easeOutCubic = t => 1 - Math.pow(1 - t, 3);\n\n  // Find the related description element for a given stat node\n  function findDesc(el) {\n    const next = el.nextElementSibling;\n    if (next && next.classList && next.classList.contains('credentials-block__stat-description')) return next;\n    if (el.parentElement) {\n      const withinParent = el.parentElement.querySelector('.credentials-block__stat-description');\n      if (withinParent) return withinParent;\n    }\n    const item = el.closest && el.closest('.credentials-block__item');\n    if (item) {\n      const withinItem = item.querySelector('.credentials-block__stat-description');\n      if (withinItem) return withinItem;\n    }\n    return null;\n  }\n\n  function parseStat(text) {\n    const s = (text || '').trim();\n    const m = s.match(/^([^0-9\\-+]*)(-?\\d[\\d,]*(?:\\.\\d+)?)([A-Za-z%+]*)/);\n    if (!m) return { prefix: '', target: 0, decimals: 0, suffix: '' };\n    const prefix   = m[1] || '';\n    const numStr   = (m[2] || '').replace(/,/g, '');\n    const suffix   = m[3] || '';\n    const decimals = (numStr.split('.')[1] || '').length;\n    const target   = parseFloat(numStr) || 0;\n    return { prefix, target, decimals, suffix };\n  }\n\n  function formatNumber(value, decimals) {\n    return value.toLocaleString(undefined, {\n      minimumFractionDigits: decimals,\n      maximumFractionDigits: decimals\n    });\n  }\n\n  function prepare(el) {\n    if (el.dataset.prepared === '1') return;\n    const meta = parseStat(el.textContent);\n    el.dataset.prefix   = meta.prefix;\n    el.dataset.target   = String(meta.target);\n    el.dataset.decimals = String(meta.decimals);\n    el.dataset.suffix   = meta.suffix;\n    el.dataset.prepared = '1';\n  }\n\n  function reset(el) {\n    // show 0 with the same decimals, prefix, suffix\n    const decimals = +el.dataset.decimals || 0;\n    el.textContent = `${el.dataset.prefix || ''}${formatNumber(0, decimals)}${el.dataset.suffix || ''}`;\n    el.dataset.animating = '0';\n\n    // hide the related description until we animate again (class only)\n    const desc = findDesc(el);\n    if (desc) desc.classList.remove('stat-is-visible');\n  }\n\n  function animate(el) {\n    if (el.dataset.animating === '1') return; // do not double start\n    el.dataset.animating = '1';\n\n    // ensure description is hidden while animating (class only)\n    const desc = findDesc(el);\n    if (desc) desc.classList.remove('stat-is-visible');\n\n    const prefix   = el.dataset.prefix || '';\n    const suffix   = el.dataset.suffix || '';\n    const target   = +(el.dataset.target || 0);\n    const decimals = +(el.dataset.decimals || 0);\n    const dur      = +(el.dataset.duration || DEFAULT_DURATION);\n\n    const t0 = performance.now();\n    function frame(now) {\n      const p = Math.min(1, (now - t0) / dur);\n      const v = target * easeOutCubic(p);\n      el.textContent = `${prefix}${formatNumber(v, decimals)}${suffix}`;\n      if (p < 1) {\n        requestAnimationFrame(frame);\n      } else {\n        el.textContent = `${prefix}${formatNumber(target, decimals)}${suffix}`;\n        el.dataset.animating = '0';\n        // reveal description now that the stat is finished (fade handled by CSS)\n        if (desc) desc.classList.add('stat-is-visible');\n      }\n    }\n    requestAnimationFrame(frame);\n  }\n\n  function init() {\n    const nodes = document.querySelectorAll('.credentials-block__stat');\n    if (!nodes.length) return;\n\n    // Prepare all numbers once\n    nodes.forEach(prepare);\n\n    // Replay on every entry, reset on exit\n    if ('IntersectionObserver' in window) {\n      const io = new IntersectionObserver((entries) => {\n        entries.forEach((e) => {\n          const el = e.target;\n          if (e.isIntersecting) {\n            animate(el);\n          } else {\n            reset(el);\n          }\n        });\n      }, {\n        threshold: 0.35,\n        rootMargin: '0px 0px -10% 0px'\n      });\n\n      nodes.forEach(n => {\n        reset(n);       // ensure descriptions start hidden\n        io.observe(n);\n      });\n    } else {\n      // Fallback: animate once if IO not supported\n      nodes.forEach(animate);\n    }\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n\n\n// Featured Posts Block Slider\nconst $fpb = $('.featured-posts-block__blocks');\nif ($fpb.length && !$fpb.hasClass('slick-initialized')) {\n  $fpb.slick({\n    dots: false,\n    infinite: true,\n    speed: 300,\n    slidesToShow: 4,\n    slidesToScroll: 1,\n    responsive: [\n      { breakpoint: 1024, settings: { slidesToShow: 3, slidesToScroll: 1 } },\n      { breakpoint: 600,  settings: { slidesToShow: 3, slidesToScroll: 1 } },\n      { breakpoint: 480,  settings: { slidesToShow: 1, slidesToScroll: 1 } }\n    ]\n  });\n}\n\n\n// Reviews Block Slider\nconst $reviews = $('.reviews-block__slides'); \nif ($reviews.length && !$reviews.hasClass('slick-initialized')) {\n  $reviews.slick({\n    dots: false,\n    arrows: true,\n    infinite: true,\n    speed: 1000,\n    slidesToShow: 3,\n    slidesToScroll: 1,\n    autoplay: true,\n    autoplaySpeed: 2000,\n    cssEase: 'linear'\n  });\n}\n\n\n// Heading Block & Reviews Block Heading Animation\n(function () {\n  document.documentElement.classList.add('js');\n\n  var $win = $(window);\n  var $wrappers = $('.heading-block__wrapper, .reviews-block__wrapper');\n  if (!$wrappers.length) return;\n\n  // tune these two numbers if you want it even earlier/later\n  var ENTER_FRAC = 0.20; \n  var EXIT_FRAC  = 0.98; \n\n  var ticking = false;\n  function onScrollOrResize() {\n    if (ticking) return;\n    ticking = true;\n    requestAnimationFrame(check);\n  }\n\n  function check() {\n    ticking = false;\n    var vh = window.innerHeight || $win.height();\n    var bandTop = Math.round(vh * ENTER_FRAC);\n    var bandBot = Math.round(vh * EXIT_FRAC);\n\n    $wrappers.each(function () {\n      var rect   = this.getBoundingClientRect();\n      var center = rect.top + rect.height / 2;\n      var onScreen = rect.bottom > 0 && rect.top < vh;\n\n      // If your CSS targets .reviews-block instead of .reviews-block-text, swap selector below\n      var $target = $(this).find('.heading-block, .reviews-block-text').first();\n\n      // earlier in and earlier out\n      var inBand = onScreen && center >= bandTop && center <= bandBot;\n      $target.toggleClass('is-in-view', inBand);\n    });\n  }\n\n  check();\n  $win.on('scroll resize', onScrollOrResize);\n})();\n\n\n// Animated Two Column Block \n$(function () {\n  // Mark that JS is active so CSS can start hidden without FOUC\n  document.documentElement.classList.add('js');\n\n  var $win = $(window);\n  var $wrappers = $('.animated-two-column-block__wrapper');\n  if (!$wrappers.length) return;\n\n  var ticking = false;\n  function queueCheck() {\n    if (ticking) return;\n    ticking = true;\n    requestAnimationFrame(check);\n  }\n\n  function check() {\n    ticking = false;\n\n    var vh = window.innerHeight || $win.height();\n    var cutoff = vh - Math.round(vh * 0.20); // 80% down the viewport\n\n    $wrappers.each(function () {\n      var rect = this.getBoundingClientRect();\n      // “In view” within the viewport clipped by bottom 20vh:\n      var inView = (rect.top < cutoff) && (rect.bottom > 0);\n\n      // Toggle on the inner block so CSS can do the stagger\n      $(this).find('.animated-two-column-block').first()\n        .toggleClass('is-in-view', inView);\n    });\n  }\n\n  // Initial check + listeners\n  check();\n  $win.on('scroll resize', queueCheck);\n});\n\n\n// Animated Two Column Block Animation\n$(document).on('click', '.animated-list-block__item', function (e) {\n  var $it = $(this);\n  if (!$it.hasClass('item-clicked')) {\n    e.preventDefault();\n    $it.addClass('item-clicked')\n       .siblings('.animated-list-block__item').removeClass('item-clicked');\n  }\n});\n\n\n\n\n  });\n})(jQuery);\n"],"names":[],"sourceRoot":""}