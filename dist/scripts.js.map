{"version":3,"file":"scripts.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;;AAGL;AACA;AACA;AACA,GAAG;;;AAGH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB,OAAO;AACP,KAAK;AACL;AACA;AACA,KAAK;;AAEL,0CAA0C,mBAAmB;AAC7D;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+CAA+C,oBAAoB;AACnE,GAAG;AACH,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC,GAAG;;;AAGH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;;AAGL;AACA,gEAAgE;AAChE;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,wBAAwB,EAAE,0BAA0B,EAAE,wBAAwB;AACtG;AACA;;AAEA;AACA,8CAA8C;AAC9C;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAA0B,OAAO,EAAE,0BAA0B,EAAE,OAAO;AACtE;AACA;AACA,4BAA4B,OAAO,EAAE,+BAA+B,EAAE,OAAO;AAC7E;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,8BAA8B,sCAAsC;AAC5E,QAAQ,8BAA8B,sCAAsC;AAC5E,QAAQ,8BAA8B;AACtC;AACA,GAAG;AACH;;;AAGA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,CAAC;;;AAGD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,6CAA6C;;AAE7C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,CAAC;;;;AAID,GAAG;AACH,CAAC","sources":["webpack://king-law/./app/js/scripts.js"],"sourcesContent":["(function ($) {\n  $(function () {\n    // Sticky menu\n    $(window).on('scroll', function () {\n      if ($(window).scrollTop() >= 100) {\n        $('.site-header__wrapper').addClass('sticky');\n        $('nav div').addClass('visible-title');\n      } else {\n        $('.site-header__wrapper').removeClass('sticky');\n      }\n    });\n\n    // Stop scroll when menu is open\n    $('.menu-toggle').on('click', function () {\n      $('html').toggleClass('active');\n    });\n\n\n  // Home Page Hero Animation\n    jQuery(window).on('load', function () {\n        $('.hero-block').addClass('ready'); \n  });\n\n\n// Services Block\n\n// Config: how many paragraphs to show up-front \nconst BASE_PARAS_MOBILE  = 2;\nconst BASE_PARAS_DESKTOP = 3;\nconst DESKTOP_BP = 768;\n\n// Track observers so we can disconnect on close\nconst descObservers = new WeakMap();\n\nfunction visibleBaseCount() {\n  return window.innerWidth >= DESKTOP_BP ? BASE_PARAS_DESKTOP : BASE_PARAS_MOBILE;\n}\n\nfunction teardownReveal($desc) {\n  const el = $desc[0];\n  const obs = descObservers.get(el);\n  if (obs) {\n    obs.disconnect();\n    descObservers.delete(el);\n  }\n  // Remove reveal classes so the block is \"clean\" if reopened\n  $desc.find('p').removeClass('is-hidden is-visible');\n}\n\nfunction setupReveal($desc) {\n  const el = $desc[0];\n  teardownReveal($desc);\n\n  const $paras = $desc.find('p');\n  if (!$paras.length) return;\n\n  const base = visibleBaseCount();\n\n  // Set initial state: first N visible, rest hidden\n  $paras.each(function (i) {\n    if (i < base) {\n      $(this).addClass('is-visible').removeClass('is-hidden');\n    } else {\n      $(this).addClass('is-hidden').removeClass('is-visible');\n    }\n  });\n\n  // Observe hidden paragraphs and reveal them as they enter viewport\n  if ('IntersectionObserver' in window) {\n    const io = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        if (!entry.isIntersecting) return;\n        const p = entry.target;\n        p.classList.add('is-visible');\n        p.classList.remove('is-hidden');\n        io.unobserve(p); // reveal once\n      });\n    }, {\n      threshold: 0.25,         // start the fade when ~25% visible\n      rootMargin: '0px 0px -5% 0px'\n    });\n\n    $paras.slice(base).each(function () { io.observe(this); });\n    descObservers.set(el, io);\n  } else {\n    // Fallback: if IO unsupported, just show all\n    $paras.removeClass('is-hidden').addClass('is-visible');\n  }\n}\n\n// ensure first image shows on load per block\n$('.services-block').each(function () {\n  const $images = $(this).find('.services-block__images .services-block__image');\n  $images.removeClass('is-active').eq(0).addClass('is-active');\n});\n\n// Main click: on heading only (open/close + sync image + smooth scroll)\n$(document).on('click', '.services-block__heading', function (e) {\n  e.preventDefault();\n\n  const $heading = $(this);\n  const $root = $heading.closest('.services-content');\n\n  const $allHeadings = $root.find('.services-block__heading');\n  const $allDescs = $root.find('.services-block__description');\n  const $images = $root.find('.services-block__images .services-block__image');\n\n  const $desc = $heading.next('.services-block__description');\n  const isOpen = $heading.hasClass('active');\n\n  if (isOpen) {\n    $heading.removeClass('active');\n    // tear down reveal and close\n    teardownReveal($desc);\n    $desc.stop(true, true).slideUp(150);\n    $images.removeClass('is-active').eq(0).addClass('is-active');\n    return;\n  }\n\n  // close others\n  $allHeadings.not($heading).removeClass('active');\n  $allDescs.not($desc).each(function () {\n    teardownReveal($(this));\n  }).stop(true, true).slideUp(0);\n\n  // image index maps to heading index\n  const idx = $allHeadings.index($heading);\n  if (idx >= 0 && $images.length) {\n    const safeIdx = Math.min(idx, $images.length - 1);\n    $images.removeClass('is-active').eq(safeIdx).addClass('is-active');\n  }\n\n  // open this one\n  $heading.addClass('active');\n  $desc.stop(true, true).slideDown(150, () => {\n    // initialize progressive reveal inside this description\n    setupReveal($desc);\n\n    // smooth scroll to place the opened heading nicely under the top bar\n    const TOP_OFFSET = 120;\n    const targetY = Math.max(0, $heading.offset().top - TOP_OFFSET);\n    $('html, body').stop(true, true).animate({ scrollTop: targetY }, 350, 'swing');\n  });\n});\n\n// swap images on hover\n$(document)\n  .on('mouseenter', '.services-block__heading', function () {\n    const $block    = $(this).closest('.services-block');\n    const $headings = $block.find('.services-block__heading');\n    const $images   = $block.find('.services-block__images .services-block__image');\n    const idx = $headings.index(this);\n    if (idx < 0) return;\n\n    $block.addClass('is-hovering');\n    $images.removeClass('is-hover')\n           .eq(idx).addClass('is-hover');\n  })\n  .on('mouseleave', '.services-block', function () {\n    const $block  = $(this);\n    const $images = $block.find('.services-block__images .services-block__image');\n\n    $block.removeClass('is-hovering');\n    $images.removeClass('is-hover'); // active one reappears\n  });\n\n\n    // Sticky CTA Block\n    const $inner = $('.sticky-cta-block__inner');\n    const $wrapper = $('.sticky-cta-block__wrapper');\n    const $content = $('.landing-page__content');\n\n    if (window.innerWidth >= 768 && $inner.length && $wrapper.length && $content.length) {\n      $('.landing-page__content__wrapper').addClass('sticky-block-added');\n\n      const fixedTop = 64;\n      const fixedWidth = 480;\n\n      function updateStickyCTA() {\n        const scrollTop = $(window).scrollTop();\n        const wrapperTop = $wrapper.offset().top;\n        const wrapperLeft = $wrapper.offset().left;\n        const stickyHeight = $inner.outerHeight();\n        const contentBottom = $content.offset().top + $content.outerHeight();\n\n        if (scrollTop >= wrapperTop && scrollTop + stickyHeight < contentBottom) {\n          $inner.css({\n            position: 'fixed',\n            top: fixedTop + 'px',\n            left: wrapperLeft + 'px',\n            width: fixedWidth + 'px',\n            padding: '32px',\n            border: '1px solid',\n            borderRadius: '16px',\n          });\n        } else if (scrollTop + stickyHeight >= contentBottom) {\n          const absoluteTop = contentBottom - wrapperTop - stickyHeight;\n          $inner.css({\n            position: 'absolute',\n            top: absoluteTop + 'px',\n            left: '0',\n            width: '100%',\n            padding: '32px',\n            border: '1px solid',\n            borderRadius: '16px',\n          });\n        } else {\n          $inner.css({\n            position: 'static',\n            top: '',\n            left: '',\n            width: '100%',\n            padding: '32px',\n            border: '1px solid',\n            borderRadius: '16px',\n          });\n        }\n      }\n\n      $(window).on('scroll resize', updateStickyCTA);\n      updateStickyCTA();\n    }\n\n\n    // Car animation\n    let carHasDrivenOff = false;\n    $(window).on('load', function () {\n      $('.sliding-image').addClass('slide-in');\n    });\n    $(window).on('scroll', function () {\n      const scrollTop = $(window).scrollTop();\n\n      if (scrollTop > 20 && !carHasDrivenOff) {\n        $('.sliding-image').removeClass('slide-in').addClass('slide-out');\n        carHasDrivenOff = true;\n      }\n\n      if (scrollTop <= 10 && carHasDrivenOff) {\n        $('.sliding-image').removeClass('slide-out').addClass('slide-in');\n        carHasDrivenOff = false;\n      }\n    });\n\n\n    // Vertical Sliding Animation\n    const raf = window.requestAnimationFrame || function (cb) { return setTimeout(cb, 1000 / 60); };\n    const elementsToShow = document.querySelectorAll('.vertical-slide-yes');\n\n    function loop() {\n      Array.prototype.forEach.call(elementsToShow, function (element) {\n        if (isElementInViewport(element)) element.classList.add('is-visible');\n        else element.classList.remove('is-visible');\n      });\n      raf(loop);\n    }\n    loop();\n\n    function isElementInViewport(el) {\n      if (typeof jQuery === 'function' && el instanceof jQuery) el = el[0];\n      const rect = el.getBoundingClientRect();\n      const vh = window.innerHeight || document.documentElement.clientHeight;\n      const revealPoint = vh * 0.1;\n      return rect.top <= vh - revealPoint && rect.bottom >= revealPoint;\n    }\n\n\n// Awards Block Animation\n(function () {\n  const DEFAULT_DURATION = 1200;\n  const easeOutCubic = t => 1 - Math.pow(1 - t, 3);\n\n  function parseStat(text) {\n    const s = (text || '').trim();\n    const m = s.match(/^([^0-9\\-+]*)(-?\\d[\\d,]*(?:\\.\\d+)?)([A-Za-z%+]*)/);\n    if (!m) return { prefix: '', target: 0, decimals: 0, suffix: '' };\n    const prefix   = m[1] || '';\n    const numStr   = (m[2] || '').replace(/,/g, '');\n    const suffix   = m[3] || '';\n    const decimals = (numStr.split('.')[1] || '').length;\n    const target   = parseFloat(numStr) || 0;\n    return { prefix, target, decimals, suffix };\n  }\n\n  function formatNumber(value, decimals) {\n    return value.toLocaleString(undefined, {\n      minimumFractionDigits: decimals,\n      maximumFractionDigits: decimals\n    });\n  }\n\n  function prepare(el) {\n    if (el.dataset.prepared === '1') return;\n    const meta = parseStat(el.textContent);\n    el.dataset.prefix   = meta.prefix;\n    el.dataset.target   = String(meta.target);\n    el.dataset.decimals = String(meta.decimals);\n    el.dataset.suffix   = meta.suffix;\n    el.dataset.prepared = '1';\n  }\n\n  function reset(el) {\n    // show 0 with the same decimals/prefix/suffix\n    const decimals = +el.dataset.decimals || 0;\n    el.textContent = `${el.dataset.prefix || ''}${formatNumber(0, decimals)}${el.dataset.suffix || ''}`;\n    el.dataset.animating = '0';\n  }\n\n  function animate(el) {\n    if (el.dataset.animating === '1') return; // don't double-start\n    el.dataset.animating = '1';\n\n    const prefix   = el.dataset.prefix || '';\n    const suffix   = el.dataset.suffix || '';\n    const target   = +(el.dataset.target || 0);\n    const decimals = +(el.dataset.decimals || 0);\n    const dur      = +(el.dataset.duration || DEFAULT_DURATION);\n\n    const t0 = performance.now();\n    function frame(now) {\n      const p = Math.min(1, (now - t0) / dur);\n      const v = target * easeOutCubic(p);\n      el.textContent = `${prefix}${formatNumber(v, decimals)}${suffix}`;\n      if (p < 1) requestAnimationFrame(frame);\n      else {\n        el.textContent = `${prefix}${formatNumber(target, decimals)}${suffix}`;\n        el.dataset.animating = '0';\n      }\n    }\n    requestAnimationFrame(frame);\n  }\n\n  function init() {\n    const nodes = document.querySelectorAll('.awards-block__stat');\n    if (!nodes.length) return;\n\n    // Prepare all numbers once\n    nodes.forEach(prepare);\n\n    // Replay on every entry; reset on exit\n    if ('IntersectionObserver' in window) {\n      const io = new IntersectionObserver((entries) => {\n        entries.forEach((e) => {\n          const el = e.target;\n          if (e.isIntersecting) {\n            animate(el);\n          } else {\n            reset(el);\n          }\n        });\n      }, {\n        threshold: 0.35,\n        // start a hair before fully above-the-fold:\n        rootMargin: '0px 0px -10% 0px'\n      });\n\n      nodes.forEach(n => {\n        // start from 0 until first entry\n        reset(n);\n        io.observe(n);\n      });\n    } else {\n      // Fallback: just animate once if IO not supported\n      nodes.forEach(animate);\n    }\n  }\n\n  if (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n  } else {\n    init();\n  }\n})();\n\n\n// Featured Posts Block Slider\nconst $fpb = $('.featured-posts-block__blocks');\nif ($fpb.length && !$fpb.hasClass('slick-initialized')) {\n  $fpb.slick({\n    dots: false,\n    infinite: true,\n    speed: 300,\n    slidesToShow: 4,\n    slidesToScroll: 1,\n    responsive: [\n      { breakpoint: 1024, settings: { slidesToShow: 3, slidesToScroll: 1 } },\n      { breakpoint: 600,  settings: { slidesToShow: 3, slidesToScroll: 1 } },\n      { breakpoint: 480,  settings: { slidesToShow: 1, slidesToScroll: 1 } }\n    ]\n  });\n}\n\n\n// Reviews Block Slider, use a different selector\nconst $reviews = $('.reviews-block__items'); // update to your real reviews selector\nif ($reviews.length && !$reviews.hasClass('slick-initialized')) {\n  $reviews.slick({\n    dots: false,\n    infinite: true,\n    speed: 1000,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    autoplay: true,\n    autoplaySpeed: 2000,\n    fade: true,\n    cssEase: 'linear'\n  });\n}\n\n\n// Heading Block Animation\n(function () {\n  document.documentElement.classList.add('js');\n\n  var $win = $(window);\n  var $wrappers = $('.heading-block__wrapper');\n  if (!$wrappers.length) return;\n\n  var ticking = false;\n  function onScrollOrResize() {\n    if (ticking) return;\n    ticking = true;\n    requestAnimationFrame(check);\n  }\n\n  function check() {\n    ticking = false;\n    var vh = window.innerHeight || $win.height();\n    var cutoff = vh - Math.round(vh * 0.20);\n    $wrappers.each(function () {\n      var rect = this.getBoundingClientRect();\n      var inView = (rect.top < cutoff) && (rect.bottom > 0);\n      $(this).find('.heading-block').first().toggleClass('is-in-view', inView);\n    });\n  }\n\n  check();\n  $win.on('scroll resize', onScrollOrResize);\n})();\n\n\n// Animated Two Column Block \n$(function () {\n  // Mark that JS is active so CSS can start hidden without FOUC\n  document.documentElement.classList.add('js');\n\n  var $win = $(window);\n  var $wrappers = $('.animated-two-column-block__wrapper');\n  if (!$wrappers.length) return;\n\n  var ticking = false;\n  function queueCheck() {\n    if (ticking) return;\n    ticking = true;\n    requestAnimationFrame(check);\n  }\n\n  function check() {\n    ticking = false;\n\n    var vh = window.innerHeight || $win.height();\n    var cutoff = vh - Math.round(vh * 0.20); // 80% down the viewport\n\n    $wrappers.each(function () {\n      var rect = this.getBoundingClientRect();\n      // “In view” within the viewport clipped by bottom 20vh:\n      var inView = (rect.top < cutoff) && (rect.bottom > 0);\n\n      // Toggle on the inner block so CSS can do the stagger\n      $(this).find('.animated-two-column-block').first()\n        .toggleClass('is-in-view', inView);\n    });\n  }\n\n  // Initial check + listeners\n  check();\n  $win.on('scroll resize', queueCheck);\n});\n\n\n\n  });\n})(jQuery);\n"],"names":[],"sourceRoot":""}